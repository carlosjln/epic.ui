/*!
 * EPIC.UI.JS - v1.0.4
 * Simple & awesome UI components for EPIC.JS
 * https://github.com/carlosjln/epic.ui
 * 
 * Copyright 2014
 * Released under MIT License
 * https://github.com/carlosjln/epic.ui/blob/master/LICENSE
 * 
 * Author: Carlos J. Lopez
 * https://github.com/carlosjln
 */
(function(n){function t(){}t.align={"default":"",left:"pull-left",right:"pull-right"};n.ui=t})(epic),function(n){function t(i){var r=this;i=r.settings=n.object.merge(t.default_settings,i);var u=r.container=document.createElement("div"),f=r.message=document.createElement("span"),e=i.type,o=i.message,s=i.target;u.insertBefore(f,null);f.className="message";u.className="alert alert-"+(e?e:"default");o&&(f.innerHTML=o);s&&s.insertBefore(u,null)}t.prototype={show:function(){return this.container.style.display="block",this},hide:function(){return this.container.style.display="none",this},set_message:function(n){return this.message.innerHTML=n,this},as_success:function(){return this.set_type(t.type.success)},as_info:function(){return this.set_type(t.type.info)},as_warning:function(){return this.set_type(t.type.warning)},as_danger:function(){return this.set_type(t.type.danger)},set_type:function(n){var t=this;return t.container.className="alert alert-"+n,t}};t.type={"default":"default",success:"success",info:"info",warning:"warning",danger:"danger"};t.default_settings={type:t.type.default,message:"",target:null,closable:!1};n.alert=t}(epic),function(n,t){function i(n){n=n||{};var i=this,f=i.container=t.createElement("i");u(n,i);f.className=r(i);i.set_caption(i.caption)}function r(n){var t=n.prefix||"",i=n.family||"",r=n.name||"",u=n.align||"",e=n.classes||"";return t=t?t+"-":"",f(i+" "+t+r+" "+u+" "+e,!0)}var u=n.object.copy,f=n.string.trim,e={constructor:i,family:"",prefix:"",classes:"",change:function(n){var t=this;return n&&(t.name=n,t.container.className=r(t)),t},set_align:function(n){var t=this;return typeof n=="string"&&(t.align=n,t.container.className=r(t)),t},set_caption:function(n){var t=this;return typeof n=="string"&&(t.container.innerHTML=n),t},hide:function(){var n=this;return n.container.style.display="none",n},show:function(){var n=this;return n.container.style.display="",n}};i.setup=function(n){u(n,i.prototype)};i.setup(e);n.icon=i}(epic,document),function(n,t){function i(r){var f,o,a,v;r=r||{};f=this;for(o in r)f[o]=r[o];var y=f.id=f.id||"BTN-"+n.uid.next(),c=f.caption,s=f.tag,p=f.size,w=f.style,b=f.attributes,l=f.classes="btn "+f.classes,k=s===i.size.button?'type="'+f.role+'"':"",e=f.icon=r.icon||new n.icon,h=n.ui.align;e.align===h.default&&e.set_align(h.left);c===""&&(e.name!==""&&(l+=" btn-icon-only"),e.set_align(h.default));a="<"+s+' id="'+y+'"'+k+' class="'+l+" btn-size-"+p+" btn-"+w+'" '+b+"><\/"+s+">";v=t(u(a)).append(e.container,c);f.container=v.get(0)}var u=n.html.create.document_fragment,r;i.size={mini:"mini",small:"small",normal:"normal",large:"large"};i.tag={anchor:"a",button:"button"};i.role={button:"button",submit:"submit",reset:"reset"};i.style={"default":"default",primary:"primary",warning:"warning",danger:"danger",success:"success",info:"info"};r={caption:"",classes:"",attributes:"",tag:i.tag.button,size:i.size.normal,role:i.role.button,style:i.style.default};n.object.extend(i,r);n.button=i}(epic,epic.html),function(n,t,i){function r(n,t,r,u){var f=i.createElement(n);return f.className=t||"",f.style.cssText=r||"",f.innerHTML=u||"",f}function e(){var n=this;n.views=[];n.container=r("div","epic-viewport")}function u(n){var i=r("div","epic-view",""),u=r("span","epic-view-status","","Working..."),t=this;t.container=i;t.loader=u;t.viewport=n;i.insertBefore(u,null)}var f=n.html;e.prototype.add_view=function(){var n=this,i=n.views,t=new u(n);return n.container.insertBefore(t.container,null),i[i.length]=t,t};u.prototype={is_busy:function(n){var t=this.loader;t.style.display="none";t.innerHTML="Working out...";n&&(t.style.display="inline",typeof n=="string"&&(t.innerHTML=n))},activate:function(){var n=this,t=n.viewport,i=t.current_view;return i&&(i.container.style.display="none"),n.container.style.display="block",t.current_view=n,n},empty:function(){var n=this,t=n.container;return n.is_busy(!1),f(t).empty().append(n.loader),n},append:function(){var n=this;return f(n.container).insert(arguments),n}};n.viewport=e;n.view=u}(epic,window,document),function(n,t){function u(){var i="epic-notification-rail",n=t.getElementById(i);return n===null&&(n=t.createElement("div"),n.id=i),n.parentNode===null&&t.body.insertBefore(n,null),n}function i(r){r=n.object.merge(i.default_settings,r);var e=this,o=e.container=t.createElement("div"),c=e.title=t.createElement("span"),s=e.close_button=t.createElement("span"),l=e.message=t.createElement("div"),h=r.type,a=r.title,v=r.timeout;a=a||(h===i.type.default?"Information!":h.charAt(0).toUpperCase()+h.slice(1)+"!");e.settings=r;e.set_type(h);s.innerHTML="";s.className="epic-notice-close";n.event.add("click",s,i.event.close,o);c.innerHTML=a;c.className="epic-notice-title";l.innerHTML=r.message;l.className="epic-notice-content";o.insertBefore(s,null);o.insertBefore(c,null);o.insertBefore(l,null);n.event.add("mouseover",o,i.event.mouseover,s);n.event.add("mouseout",o,i.event.mouseout,s);u().insertBefore(o,null);typeof v=="number"&&setTimeout(function(){e.is_closed()||f(e.container)},v*1e3)}function r(n){return new i(n)}function f(n){var t=1,i=setInterval(function(){t<=.1&&(clearInterval(i),n.style.opacity="1",n.style.display="none");n.style.opacity=t;n.style.filter="alpha(opacity="+t*100+")";t-=t*.3},50)}i.prototype={set_content:function(n){var t=this;return t.message.innerHTML=n,t},show:function(){var n=this,t=n.container;return t.style.display="block",n.parentNode===null&&u().insertBefore(t,null),n},hide:function(){var n=this;return n.container.style.display="none",n},is_closed:function(){return this.container.style.display=="none"},as_success:function(){return this.set_type(alert.type.success)},as_info:function(){return this.set_type(alert.type.info)},as_warning:function(){return this.set_type(alert.type.warning)},as_danger:function(){return this.set_type(alert.type.danger)},set_type:function(n){var t=this;return t.container.className="epic-notice epic-notice-"+n,t}};i.type={"default":"default",success:"success",info:"info",warning:"warning",danger:"danger"};i.default_settings={type:i.type.default,message:"",closable:!1,timeout:5};i.event={close:function(n,t){var i=t.parentNode;i.removeChild(t)},mouseover:function(n,t){t.style.display="block"},mouseout:function(n,t){t.style.display="none"}};r.success=function(n,t){return new i({type:i.type.success,message:n,closable:t})};r.danger=function(n,t){return new i({type:i.type.danger,message:n,closable:t})};r.warning=function(n,t){return new i({type:i.type.warning,message:n,closable:t})};r.info=function(n,t){return new i({type:i.type.info,message:n,closable:t})};n.notice=i;n.notify=r}(epic,document),function(n,t){function i(i){var r=this,l=i.id||"epic-box-"+n.uid.next(),u=t('<div id="'+l+'" class="epic-box"><\/div>'),f=t('<div class="epic-box-header"><\/div>'),e=t('<div class="epic-box-caption-wrapper"><\/div>'),h=t('<span class="epic-box-caption"><\/span>'),o=t('<div class="epic-box-controls"><\/div>'),s=t('<div class="epic-box-body"><\/div>'),a=r.viewport=new n.viewport,c=i.controls;r.settings=i;r.container=u.get(0);r.header=f.get(0);r.caption_wrapper=e.get(0);r.icon=i.icon||new n.icon;r.caption=h.get(0);r.controls=o.get(0);r.body=s.get(0);s.append(a.container);e.append(r.icon.container);e.append(h);f.append(e);f.append(o);u.append(f);u.append(s);r.set_caption(i.caption);r.resize(i.width,i.height);i.singleview&&r.viewport.add_view().activate();c&&o.append(c);i.target&&t(i.target).append(u)}var r=i.prototype;r.set_caption=function(n){n&&t(this.caption).html(n)};r.resize=function(n,t){if(n&&t){var i=this.container.style;i.width=n+"px";i.height=t+"px"}};n.box=i}(epic,epic.html),function(n){function r(n,t,i,r){var u=document.createElement(n);return u.className=t||"",u.style.cssText=i||"",u.innerHTML=r||"",u}function i(n){var e=t(r("div","modal-container")),c=t(r("div","modal-overlay")),u=t(n.content).add_class("modal-content"),l=u.find(".btn-hide-overlay"),a=e.find(".btn-remove-overlay"),s=i.events,o=this,h={container:e,btn_close:a||l,overlay:o},v,y;e.append(c,u);o.container=e.get(0);o.overlay=c.get(0);o.content=u.get(0);l.click(s.on_hide,h);a.click(s.on_hide,h);f(o.container,"keyup",s.on_escape,h);t(n.target||"body").append(e);v=u.height()/2;y=u.width()/2;u.css("margin","-"+v+"px 0 0 -"+y+"px")}var t=n.html,f=n.event.add,u=i.prototype;u.hide=function(){return this.container.style.display="none",this};u.show=function(){return this.container.style.display="block",this};i.events={on_hide:function(n){n.preventDefault();n.data.overlay.hide()},on_escape:function(n){n.preventDefault();n.which===27&&n.data.btn_close.click()}};n.overlay=i}(epic),function(n,t,i,r){function v(n,t){n.prevent_default();var i=t.option;i.disabled!==!0&&(i.onselect||t.dropdown.onselect).call(n.target,n,i,t.data)}function y(n){var t=[],u=this;u.add=function(u){if(u!==r){u=u instanceof Array?u:[u];for(var l=i.createDocumentFragment(),p=u.length,s=0,f,o,h,y,c;s<p;s++)o=u[s],f=i.createElement("li"),o.divide===!0?f.className="divider":(h=t[t.length]=new a(o),c=h.container,y={dropdown:n,option:h,data:o.data},e(c,"click",v,y),f.insertBefore(c,null)),l.insertBefore(f,null);n.list.insertBefore(l,null)}};u.get=function(n){return t[n]}}function f(t){var r=this,u=r.container=i.createElement("span"),c=r.toggle_button=t.toggle_button||new s({style:s.style.primary,icon:new n.icon({name:"caret"})}),f=c.container,o=r.list=i.createElement("ul"),a=r.options=new y(r);h(f,"dropdown-toggle");o.className="dropdown-menu";u.id=t.id||"DD-"+l.next();u.insertBefore(f,null);u.insertBefore(o,null);h(u,"dropdown "+t.classes);r.onselect=t.onselect||p;e(f,"click",b,r);a.add(t.options)}function p(n){n.prevent_default()}function w(n){o(u);var t=n.container;t.className.indexOf("open")===-1&&(t.className+=" open");u=n}function o(n){if(n instanceof f!=!1){var t=n.container;t.className=c(t.className.replace(/open/,""),!0);u=r}}function b(n,t){n.stop_propagation();t.toggle()}var e=n.event.add,c=n.string.trim,s=n.button,h=n.html.add_class,u,l=n.uid,a=function(){function n(n){var t=this,r=t.container=i.createElement("a");r.setAttribute("href","#");t.set_caption(n.caption);t.onselect=n.onselect}return n.prototype={constructor:n,disable:function(){var n=this,t=n.container;t.className="disabled";t.setAttribute("disabled","true");n.disabled=!0},enable:function(){var n=this,t=n.container;t.className="";t.removeAttribute("disabled");n.disabled=!1},set_caption:function(n){var t=this;return typeof n=="string"&&(t.caption=n,t.container.innerHTML=n),t}},n}();f.prototype={constructor:f,divide:function(){var n=i.createElement("hr");return n.className="divider unselectable",this.options.insertBefore(n),n},open:function(){w(this)},close:function(){o(this)},toggle:function(){var n=this;n.is_opened()?n.close():n.open()},is_opened:function(){return this.container.className.indexOf("open")>-1}};e(i,"click",function(n){var r=n.target||{},f=r.parentNode||{},t=r.className,i=f.className,e=t&&typeof t=="string"&&t.indexOf("dropdown")>-1,s=i&&typeof i=="string"&&i.indexOf("dropdown")>-1;e||s||o(u)});n.dropdown=f}(epic,window,document);